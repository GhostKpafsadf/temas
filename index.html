<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>TEMAS | OMNI 06</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <style>
        :root { --gold: #d4af37; --cyan: #00f2ff; --bg: #050505; --glass: rgba(255,255,255,0.03); --active: #4ade80; }
        
        body, html { 
            margin: 0; padding: 0; width: 100%; height: 100%; 
            background: var(--bg); color: #fff; font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", sans-serif; 
            overflow: hidden; display: flex; align-items: center; justify-content: center;
        }

        /* ARKA PLAN PARTICLE (ANKARA Sƒ∞Sƒ∞) */
        #canvas { position: fixed; top: 0; left: 0; z-index: 1; opacity: 0.3; }

        /* VIP KART TASARIMI */
        .card-perspective { perspective: 2000px; z-index: 10; width: 90%; max-width: 340px; }
        .card {
            width: 100%; height: 540px; border-radius: 30px;
            background: linear-gradient(135deg, rgba(20,20,20,0.95) 0%, rgba(5,5,5,1) 100%);
            border: 1px solid rgba(212, 175, 55, 0.4);
            position: relative; transform-style: preserve-3d;
            display: none; flex-direction: column; align-items: center; justify-content: space-around;
            padding: 30px 20px; box-sizing: border-box;
            box-shadow: 0 0 50px rgba(0,0,0,1);
        }

        .glare {
            position: absolute; inset: 0; border-radius: 30px;
            background: linear-gradient(120deg, transparent 30%, rgba(212,175,55,0.1) 45%, transparent 70%);
            pointer-events: none;
        }

        /* FORM ALANI */
        .internal-form {
            width: 100%; display: flex; flex-direction: column; gap: 10px;
            background: var(--glass); padding: 15px; border-radius: 20px; backdrop-filter: blur(10px);
        }
        .internal-form input, .internal-form select {
            width: 100%; padding: 12px; border-radius: 10px; border: 1px solid rgba(255,255,255,0.1);
            background: #000; color: #fff; font-size: 14px; box-sizing: border-box;
        }

        /* BUTONLAR */
        .btn {
            background: #fff; color: #000; padding: 15px 30px; border-radius: 12px;
            font-weight: 800; border: none; cursor: pointer; transition: 0.3s; width: 100%;
        }
        .btn:active { transform: scale(0.95); }

        #qrcode { padding: 10px; background: #fff; border-radius: 15px; transform: translateZ(50px); display: none; }
        
        /* OVERLAYS */
        #location-screen, #boot-screen {
            position: fixed; inset: 0; z-index: 1000; background: #000;
            display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; padding: 20px;
        }
    </style>
</head>
<body onclick="enableAudio()">

    <canvas id="canvas"></canvas>
    <audio id="snd-access" src="https://actions.google.com/sounds/v1/science_fiction/access_granted.ogg"></audio>

    <div id="location-screen">
        <div style="font-size: 50px; margin-bottom: 20px;">üìç</div>
        <h2>B√ñLGE KONTROL√ú</h2>
        <p style="color: #888; font-size: 13px;">TEMAS'a eri≈ümek i√ßin Ankara sƒ±nƒ±rlarƒ± i√ßerisinde olmalƒ±sƒ±n.</p>
        <button class="btn" onclick="requestLocation()" style="width: 200px;">KONUMU DOƒûRULA</button>
    </div>

    <div id="boot-screen" style="display: none;">
        <h1 style="letter-spacing: 10px;">TEMAS</h1>
        <div id="loader" style="width: 30px; height: 30px; border: 2px solid var(--gold); border-top-color: transparent; border-radius: 50%; animation: spin 1s infinite linear;"></div>
        <p id="boot-text" style="font-family: monospace; color: var(--gold); font-size: 11px; margin-top: 15px;">PROTOKOL BA≈ûLATILIYOR...</p>
        <input type="text" id="passInput" placeholder="ERƒ∞≈ûƒ∞M KODU" style="background: none; border: none; border-bottom: 1px solid #333; color: #fff; text-align: center; font-size: 20px; margin: 20px 0; outline: none; display: none;">
        <button id="entryBtn" class="btn" style="display: none; width: 200px;" onclick="validateEntry()">Gƒ∞Rƒ∞≈û YAP</button>
    </div>

    <div class="card-perspective">
        <div class="card" id="mainCard">
            <div class="glare"></div>
            
            <div style="text-align: center;">
                <div style="font-size: 9px; letter-spacing: 5px; color: var(--gold);">ANKARA PROTOCOL</div>
                <h1 style="margin: 0; letter-spacing: 10px; font-size: 28px;">TEMAS</h1>
            </div>

            <div id="qrcode"></div>

            <form id="vipForm" class="internal-form">
                <input type="text" name="Ad Soyad" id="formName" placeholder="Ad Soyad" required>
                <input type="text" name="Instagram" id="formInsta" placeholder="Instagram Kullanƒ±cƒ± Adƒ±" required>
                <select name="Mod" required>
                    <option value="" disabled selected>Modun Nedir?</option>
                    <option value="Sohbet">‚òï Kahve & Sohbet</option>
                    <option value="Eglence">üç∏ Eƒülence</option>
                    <option value="Network">ü§ù Network</option>
                </select>
                <button type="submit" id="submitBtn" class="btn" style="background: var(--gold);">KAYDI TAMAMLA</button>
            </form>

            <div id="userInfo" style="display: none; text-align: center; transform: translateZ(40px);">
                <h2 id="dispName" style="margin: 0; letter-spacing: 2px;"></h2>
                <p id="dispID" style="font-family: monospace; color: var(--gold); font-size: 14px;"></p>
                <div style="font-size: 10px; color: var(--active); border: 1px solid var(--active); padding: 5px 20px; border-radius: 20px; display: inline-block; margin-top: 10px;">AKTƒ∞F √úYE</div>
            </div>

            <div style="font-size: 9px; opacity: 0.4;">STATUS: OMNI_PRESENT</div>
        </div>
    </div>

    <script>
        let audioInit = false;
        function enableAudio() { audioInit = true; }

        // 1. KONUM KONTROL√ú
        function requestLocation() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition((pos) => {
                    const lat = pos.coords.latitude;
                    const lon = pos.coords.longitude;
                    // Ankara koordinatlarƒ± (39.0 - 41.0 Lat)
                    if (lat > 39.0 && lat < 41.0) {
                        document.getElementById('location-screen').style.display = 'none';
                        startBoot();
                    } else { alert("Sadece Ankara'dan eri≈üim saƒülanabilir."); }
                }, () => alert("Konum izni ≈üart!"));
            }
        }

        // 2. BOOT S√úRECƒ∞
        function startBoot() {
            document.getElementById('boot-screen').style.display = 'flex';
            setTimeout(() => {
                document.getElementById('loader').style.display = 'none';
                document.getElementById('boot-text').innerText = "ERƒ∞≈ûƒ∞M KODU GEREKLƒ∞";
                document.getElementById('passInput').style.display = 'block';
                document.getElementById('entryBtn').style.display = 'block';
            }, 2000);
        }

        // 3. KOD DOƒûRULAMA
        function validateEntry() {
            const pass = document.getElementById('passInput').value.toUpperCase();
            if (pass === "ANKARA06") {
                if(audioInit) document.getElementById('snd-access').play();
                if(navigator.vibrate) navigator.vibrate([100, 50, 100]);
                document.getElementById('boot-screen').style.display = 'none';
                document.getElementById('mainCard').style.display = 'flex';
                checkExisting();
            } else { alert("Hatalƒ± Kod."); }
        }

        // 4. FORM G√ñNDERƒ∞Mƒ∞ (FORMPSREE - Sitede Kalma)
        const vForm = document.getElementById('vipForm');
        vForm.addEventListener('submit', function(e) {
            e.preventDefault();
            const btn = document.getElementById('submitBtn');
            btn.disabled = true; btn.innerText = "Y√úKLENƒ∞YOR...";

            fetch("https://formspree.io/f/xaqdwyba", {
                method: "POST",
                body: new FormData(vForm),
                headers: { 'Accept': 'application/json' }
            }).then(() => {
                const name = document.getElementById('formName').value;
                localStorage.setItem('temas_member', name);
                localStorage.setItem('temas_day', new Date().toLocaleDateString());
                showCard(name);
            });
        });

        function showCard(name) {
            document.getElementById('vipForm').style.display = 'none';
            document.getElementById('userInfo').style.display = 'block';
            document.getElementById('qrcode').style.display = 'block';
            document.getElementById('dispName').innerText = name.toUpperCase();
            const id = "#TM-" + Math.floor(1000 + Math.random() * 9000);
            document.getElementById('dispID').innerText = id;

            new QRCode(document.getElementById("qrcode"), {
                text: `TEMAS:${name}:${id}`,
                width: 120, height: 120
            });
        }

        function checkExisting() {
            const saved = localStorage.getItem('temas_member');
            const day = localStorage.getItem('temas_day');
            if(saved && day === new Date().toLocaleDateString()) {
                showCard(saved);
            }
        }

        // 3D HAREKET
        window.addEventListener('deviceorientation', (e) => {
            const card = document.getElementById('mainCard');
            const y = Math.min(Math.max(e.gamma, -20), 20);
            const x = Math.min(Math.max(e.beta - 45, -20), 20);
            card.style.transform = `rotateY(${y}deg) rotateX(${x}deg)`;
        });

        // ARKA PLAN ANƒ∞MASYONU
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth; canvas.height = window.innerHeight;
        let p = Array.from({length: 80}, () => ({x: Math.random()*canvas.width, y: Math.random()*canvas.height, s: Math.random()*1.5}));
        function draw() {
            ctx.clearRect(0,0,canvas.width,canvas.height);
            ctx.fillStyle = '#d4af37';
            p.forEach(i => {
                ctx.beginPath(); ctx.arc(i.x, i.y, i.s, 0, 7); ctx.fill();
                i.y -= 0.2; if(i.y < 0) i.y = canvas.height;
            });
            requestAnimationFrame(draw);
        }
        draw();
    </script>
    <style> @keyframes spin { 100% { transform: rotate(360deg); } } </style>
</body>
</html>
